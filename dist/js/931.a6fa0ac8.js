"use strict";(self["webpackChunksumatera_soil"]=self["webpackChunksumatera_soil"]||[]).push([[931],{1789:function(e,a,t){t.d(a,{CT:function(){return o},rc:function(){return n},w9:function(){return r}});var i=t(9145);const s=new i.Z,r=(e={limit:1e4})=>s.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/districts",{params:e}),o=e=>s.withOptions({successFeedbackMessage:"Wilayah berhasil ditambahkan",showSuccessFeedback:!0}).axiosInstance.post("/administrator/districts",e),n=(e,a)=>s.withOptions({successFeedbackMessage:"Wilayah berhasil diperbarui",showSuccessFeedback:!0}).axiosInstance.put(`/administrator/districts/${e}`,a)},8726:function(e,a,t){t.d(a,{DY:function(){return r},T:function(){return o},X$:function(){return n},fP:function(){return l},mt:function(){return d}});var i=t(9145);const s=new i.Z,r=(e={limit:1e4})=>s.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/farmers",{params:e}),o=e=>s.withOptions({showProgressBar:!1}).axiosInstance.get(`/administrator/farmers/${e}`),n=e=>s.withOptions({successFeedbackMessage:"Petani berhasil ditambahkan",showSuccessFeedback:!0}).axiosInstance.post("/administrator/farmers",e),l=(e,a)=>s.withOptions({successFeedbackMessage:"Petani berhasil diperbarui",showSuccessFeedback:!0}).axiosInstance.put(`/administrator/farmers/${e}`,a),d=(e,a={limit:1e5})=>s.withOptions({showProgressBar:!1}).axiosInstance.get(`/administrator/farmers/${e}/farmer_point_logs`,{params:a})},7776:function(e,a,t){t.d(a,{Z:function(){return k}});var i=t(3396),s=t(9242);const r=e=>((0,i.dD)("data-v-1f202da3"),e=e(),(0,i.Cn)(),e),o=["src"],n={key:2},l=r((()=>(0,i._)("div",{class:"ant-upload-text"},"Upload",-1)));function d(e,a,t,r,d,m){const u=(0,i.up)("plus-outlined"),c=(0,i.up)("a-upload"),g=(0,i.up)("a-image");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(c,{name:"icon",listType:"picture-card",accept:".png,.jpg,.jpeg",class:"avatar-uploader-has-overlay","show-upload-list":!1,beforeUpload:()=>!1,onChange:e.onChange},{default:(0,i.w5)((()=>[(0,i._)("div",null,[e.imgUrl?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"avatar-uploader-overlay",onClick:a[2]||(a[2]=(0,s.iM)((()=>{}),["stop"]))},[(0,i._)("i",{class:"fe fe-eye mr-2",onClick:a[0]||(a[0]=(0,s.iM)(((...a)=>e.openImgPreview&&e.openImgPreview(...a)),["stop"]))}),(0,i._)("i",{class:"fe fe-trash-2",onClick:a[1]||(a[1]=(0,s.iM)(((...a)=>e.onDelete&&e.onDelete(...a)),["stop"]))})])):(0,i.kq)("",!0),e.imgUrl?((0,i.wg)(),(0,i.iD)("img",{key:1,class:"upload-image-thumbnail",src:e.imgUrl,alt:""},null,8,o)):((0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(u),l]))])])),_:1},8,["beforeUpload","onChange"]),(0,i.Wm)(g,{style:{display:"none"},preview:{visible:e.imgPreviewVisible,onVisibleChange:e.imgPreviewVisibleChange},src:e.imgUrl},null,8,["preview","src"])])}var m=t(4870),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},c=u,g=t(9388);function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(a){f(e,a,t[a])}))}return e}function f(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var h=function(e,a){var t=p({},e,a.attrs);return(0,i.Wm)(g.Z,p({},t,{icon:c}),null)};h.displayName="PlusOutlined",h.inheritAttrs=!1;var v=h;const b=(e,a)=>{const t=new FileReader;t.addEventListener("load",(()=>a(t.result))),t.readAsDataURL(e)};var _=(0,i.aZ)({name:"UploadImage",props:{imgUrl:String,changeImg:Function},components:{PlusOutlined:v},setup(){const e=(0,m.iH)(!1),a=a=>{e.value=a},t=()=>{e.value=!0};return{imgPreviewVisible:e,imgPreviewVisibleChange:a,openImgPreview:t}},methods:{checkImageUpload(e){const a="image/jpeg"===e.type||"image/png"===e.type||"image/jpeg"===e.type;let t=!0;a||(this.$message.error("Format file tidak didukung"),t=!1);const i=e.size/1024/1024<2;return i||(this.$message.error("Ukuran file terlalu besar"),t=!1),t},onChange(e){this.checkImageUpload(e.file)&&b(e.file,(a=>{this.$emit("changeImg",a,e.file)}))},onDelete(){this.$emit("changeImg","",null)}}}),w=t(89);const S=(0,w.Z)(_,[["render",d],["__scopeId","data-v-1f202da3"]]);var k=S},5931:function(e,a,t){t.r(a),t.d(a,{default:function(){return Z}});var i=t(3396);const s=(0,i._)("div",{class:"content-title"},[(0,i._)("h5",null,"Tambah Petani")],-1),r={class:"card"},o={class:"card-body"},n={class:"row mb-2"},l={class:"col-sm-12 col-md-6"},d={class:"row"},m={class:"col-sm-12 col-md-6"},u={class:"row"},c={class:"col-sm-12 col-md-6"},g={class:"row"},p={class:"col-sm-12 col-md-6"},f={class:"row mb-2"},h={class:"col-6 col-md-3"},v={class:"col-6 col-md-3"},b={class:"row mb-2"},_={class:"col-sm-6 col-md-3"},w={class:"col-sm-6 col-md-3"},S={class:"row"},k={class:"col-sm-12 col-md-6"},P={class:"row"},y={class:"col-sm-12 col-md-6"},I={class:"row mb mt-3"},U={class:"col-md-6 mb-2"},W=["disabled"],C=(0,i._)("span",{class:"btn-addon"},[(0,i._)("i",{class:"btn-addon-icon fe fe-send"})],-1),O=(0,i.Uk)(" Simpan "),q=[C,O];function F(e,a,t,C,O,F){const $=(0,i.up)("a-input"),D=(0,i.up)("a-form-item"),j=(0,i.up)("a-select"),L=(0,i.up)("upload-image"),x=(0,i.up)("a-input-password"),M=(0,i.up)("a-form");return(0,i.wg)(),(0,i.iD)("div",null,[s,(0,i._)("div",null,[(0,i.Wm)(M,{ref:"formRef",layout:"vertical",model:e.formState,rules:e.formRules,onSubmit:e.onSubmit},{default:(0,i.w5)((()=>[(0,i._)("div",r,[(0,i._)("div",o,[(0,i._)("div",n,[(0,i._)("div",l,[(0,i.Wm)(D,{ref:"name",label:"Nama",name:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{value:e.formState.name,"onUpdate:value":a[0]||(a[0]=a=>e.formState.name=a),placeholder:"Nama Petani"},null,8,["value"])])),_:1},512)])]),(0,i._)("div",d,[(0,i._)("div",m,[(0,i.Wm)(D,{ref:"phone_number",label:"No HP",name:"phone_number"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{value:e.formState.phone_number,"onUpdate:value":a[1]||(a[1]=a=>e.formState.phone_number=a),placeholder:"No HP"},null,8,["value"])])),_:1},512)])]),(0,i._)("div",u,[(0,i._)("div",c,[(0,i.Wm)(D,{ref:"district_id",label:"Wilayah",name:"district_id"},{default:(0,i.w5)((()=>[(0,i.Wm)(j,{ref:"select",style:{width:"100%"},placeholder:"Pilih wilayah",value:e.formState.district_id,"onUpdate:value":a[2]||(a[2]=a=>e.formState.district_id=a),"show-search":"",options:e.districtOptions,"filter-option":e.filterOption},null,8,["value","options","filter-option"])])),_:1},512)])]),(0,i._)("div",g,[(0,i._)("div",p,[(0,i.Wm)(D,{ref:"address",label:"Alamat",name:"address"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{value:e.formState.address,"onUpdate:value":a[3]||(a[3]=a=>e.formState.address=a),placeholder:"Alamat lengkap"},null,8,["value"])])),_:1},512)])]),(0,i._)("div",f,[(0,i._)("div",h,[(0,i.Wm)(D,{ref:"latitude",label:"Latitude",name:"latitude"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{value:e.formState.latitude,"onUpdate:value":a[4]||(a[4]=a=>e.formState.latitude=a),placeholder:"Latitude"},null,8,["value"])])),_:1},512)]),(0,i._)("div",v,[(0,i.Wm)(D,{ref:"longitude",label:"Longitude",name:"longitude"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{value:e.formState.longitude,"onUpdate:value":a[5]||(a[5]=a=>e.formState.longitude=a),placeholder:"Longitude"},null,8,["value"])])),_:1},512)])]),(0,i._)("div",b,[(0,i._)("div",_,[(0,i.Wm)(D,{ref:"image",label:"Foto",name:"image"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{"img-url":e.imageUrl,onChangeImg:e.onChangeImg},null,8,["img-url","onChangeImg"])])),_:1},512)]),(0,i._)("div",w,[(0,i.Wm)(D,{ref:"resident_card_image",label:"Foto KTP",name:"resident_card_image"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{"img-url":e.residentCardImageUrl,onChangeImg:e.onChangeResidentImg},null,8,["img-url","onChangeImg"])])),_:1},512)])]),(0,i._)("div",S,[(0,i._)("div",k,[(0,i.Wm)(D,{ref:"password",label:"Password",name:"password"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{value:e.formState.password,"onUpdate:value":a[6]||(a[6]=a=>e.formState.password=a),placeholder:"Password"},null,8,["value"])])),_:1},512)])]),(0,i._)("div",P,[(0,i._)("div",y,[(0,i.Wm)(D,{ref:"password_confirmation",label:"Konfirmasi Password",name:"password_confirmation"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{value:e.formState.password_confirmation,"onUpdate:value":a[7]||(a[7]=a=>e.formState.password_confirmation=a),placeholder:"Konfirmasi Password"},null,8,["value"])])),_:1},512)])]),(0,i._)("div",I,[(0,i._)("div",U,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-with-addon",disabled:e.loadingSubmit},q,8,W)])])])])])),_:1},8,["model","rules","onSubmit"])])])}t(6699);var $=t(4870),D=t(7776),j=t(1789),L=t(8726),x=(0,i.aZ)({name:"CreateFarmer",components:{UploadImage:D.Z},setup(){const e=(0,$.iH)(),a=(0,$.qj)({name:void 0,address:void 0,be_farmer_id:void 0,district_id:void 0,latitude:void 0,longitude:void 0,password:void 0,password_confirmation:void 0,phone_number:void 0,image:void 0,resident_card_image:void 0}),t=async(e,t)=>""===t?Promise.reject("Konfirmasi password tidak boleh kosong."):t!==a.password?Promise.reject("Password dan Konfirmasi password harus sama."):Promise.resolve(),i={name:[{required:!0,trigger:"change",message:"Nama tidak boleh kosong"}],phone_number:[{required:!0,trigger:"change",message:"No HP tidak boleh kosong"}],address:[{required:!0,trigger:"change",message:"Alamat tidak boleh kosong"}],latitude:[{required:!0,trigger:"change",message:"Latitude tidak boleh kosong"}],longitude:[{required:!0,trigger:"change",message:"Longitude tidak boleh kosong"}],district_id:[{required:!0,trigger:"change",message:"Wilayah tidak boleh kosong"}],image:[{required:!0,message:"Foto tidak boleh kosong",trigger:"blur"}],resident_card_image:[{required:!0,message:"Foto KTP tidak boleh kosong",trigger:"blur"}],password:[{required:!0,trigger:"change",message:"Password tidak boleh kosong"}],password_confirmation:[{required:!0,trigger:"change",validator:t}]},s=(0,$.iH)(""),r=(0,$.iH)(""),o=(t,i)=>{s.value=t,a.image=i,e.value?.validateFields("image")},n=(t,i)=>{r.value=t,a.resident_card_image=i,e.value?.validateFields("resident_card_image")},l=(e,a)=>a.label.toLowerCase().includes(e.toLocaleLowerCase());return{formRef:e,formState:a,formRules:i,imageUrl:s,residentCardImageUrl:r,onChangeImg:o,onChangeResidentImg:n,filterOption:l}},data(){return{districts:[],loadingSubmit:!1}},computed:{districtOptions(){return this.districts.map((e=>({value:e.id,label:e.name})))}},mounted(){this.fetchDistricts(),this.$route.params?.be_farmer_id&&(this.formState.be_farmer_id=this.$route.params.be_farmer_id,this.formState.address=this.$route.params.address,this.formState.phone_number=this.$route.params.phone_number,this.formState.latitude=this.$route.params.latitude,this.formState.longitude=this.$route.params.longitude,this.formState.name=this.$route.params.name)},methods:{async fetchDistricts(){const e=await(0,j.w9)();e.success&&(this.districts=e.data.data)},async onSubmit(){this.loadingSubmit=!0;const e=new FormData;e.append("name",this.formState.name),e.append("phone_number",this.formState.phone_number),e.append("password",this.formState.password),e.append("password_confirmation",this.formState.password_confirmation),e.append("address",this.formState.address),e.append("longitude",this.formState.longitude),e.append("latitude",this.formState.latitude),e.append("district_id",this.formState.district_id.toString()),e.append("image",this.formState.image),e.append("resident_card_image",this.formState.resident_card_image),this.formState.be_farmer_id&&e.append("be_farmer_id",this.formState.be_farmer_id.toString());const a=await(0,L.X$)(e);a.success&&(this.formState.be_farmer_id&&this.$router.back(),this.formRef.resetFields(),this.imageUrl="",this.residentCardImageUrl=""),this.loadingSubmit=!1}}}),M=t(89);const R=(0,M.Z)(x,[["render",F]]);var Z=R}}]);