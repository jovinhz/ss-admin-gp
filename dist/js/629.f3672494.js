"use strict";(self["webpackChunksumatera_soil"]=self["webpackChunksumatera_soil"]||[]).push([[629],{442:function(a,t,e){e.r(t),e.d(t,{default:function(){return W}});e(6699);var i=e(3396),s=e(7139);const n={class:"content-title"},o=(0,i._)("h5",null,"Konfigurasi Sistem",-1),d=["disabled"],l=(0,i._)("i",{class:"fe fe-refresh-cw mr-1"},null,-1),c=(0,i.Uk)(" Refresh "),r=[l,c],u={key:0,class:"text-center"},p={key:1},f={class:"card"},h={class:"card-body"},g={class:"row"},m={class:"col-12 col-md-6"},_={class:"mb-1"},w={key:0,class:"d-block text-muted"},v=(0,i.Uk)(" Simpan ");function b(a,t,e,l,c,b){const k=(0,i.up)("a-spin"),y=(0,i.up)("a-input"),S=(0,i.up)("a-button"),U=(0,i.up)("a-form-item"),C=(0,i.up)("a-form");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",n,[o,(0,i._)("div",null,[(0,i._)("button",{class:"btn btn-light mr-3",onClick:t[0]||(t[0]=(...t)=>a.refresh&&a.refresh(...t)),disabled:a.loading},r,8,d)])]),a.loading?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(k,{spinning:!0})])):((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(C,{ref:"formRef",layout:"vertical",model:a.formState},{default:(0,i.w5)((()=>[(0,i._)("div",f,[(0,i._)("div",h,[(0,i._)("div",g,[(0,i._)("div",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.formState.configs,(t=>((0,i.wg)(),(0,i.j4)(U,{name:["configs",t.id],key:t.id},{default:(0,i.w5)((()=>[(0,i._)("div",_,[(0,i._)("span",null,(0,s.zw)(t.description),1),t.updated_by?((0,i.wg)(),(0,i.iD)("span",w," Terakhir di-update pada "+(0,s.zw)(t.updated_at_caption)+" oleh "+(0,s.zw)(t.updated_by.name),1)):(0,i.kq)("",!0)]),(0,i.Wm)(y,{value:t.value,"onUpdate:value":a=>t.value=a,placeholder:t.example},null,8,["value","onUpdate:value","placeholder"]),(0,i.Wm)(S,{class:"mt-2 mb-3",type:"primary",size:"small",onClick:e=>a.updateConfig(t.id),loading:a.loadingUpdates.includes(t.id)},{default:(0,i.w5)((()=>[v])),_:2},1032,["onClick","loading"])])),_:2},1032,["name"])))),128))])])])])])),_:1},8,["model"])]))])}var k=e(4870),y=e(9145);const S=new y.Z,U=()=>S.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/application_configurations"),C=(a,t)=>S.withOptions({showProgressBar:!1,showSuccessFeedback:!0,showErrorFeedback:!0}).axiosInstance.put(`/administrator/application_configurations/${a}`,{value:t});var D=(0,i.aZ)({name:"AppConfig",setup(){const a=(0,k.iH)(),t=(0,k.qj)({configs:[]});return{formRef:a,formState:t}},data(){return{configs:[],loading:!1,loadingUpdates:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.loading=!0;const a=await U();a.success&&(this.configs=a.data,this.configs.forEach((a=>{this.formState.configs.push(a)}))),this.loading=!1},async updateConfig(a){this.loadingUpdates.push(a);const t=this.formState.configs.find((t=>t.id===a));if(t){const e=await C(a,t.value);e.success&&(t.updated_by=e.data.updated_by,t.updated_at_caption=e.data.updated_at_caption)}this.loadingUpdates=this.loadingUpdates.filter((t=>t!==a))},refresh(){this.configs=[],this.formState.configs=[],this.fetchData()}}}),x=e(89);const z=(0,x.Z)(D,[["render",b]]);var W=z}}]);