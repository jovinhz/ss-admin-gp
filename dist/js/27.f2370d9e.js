"use strict";(self["webpackChunksumatera_soil"]=self["webpackChunksumatera_soil"]||[]).push([[27],{1789:function(a,e,t){t.d(e,{CT:function(){return s},rc:function(){return n},w9:function(){return o}});var i=t(9145);const d=new i.Z,o=(a={limit:1e4})=>d.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/districts",{params:a}),s=a=>d.withOptions({successFeedbackMessage:"Wilayah berhasil ditambahkan",showSuccessFeedback:!0}).axiosInstance.post("/administrator/districts",a),n=(a,e)=>d.withOptions({successFeedbackMessage:"Wilayah berhasil diperbarui",showSuccessFeedback:!0}).axiosInstance.put(`/administrator/districts/${a}`,e)},6705:function(a,e,t){t.d(e,{p:function(){return i}});const i=a=>{const e=[];for(let t=0;t<a.length;t++)e.push({...a[t],seq:t+1});return e}},3027:function(a,e,t){t.r(e),t.d(e,{default:function(){return A}});var i=t(3396);const d={class:"content-title"},o=(0,i._)("h5",null,"Daftar Wilayah",-1),s=["disabled"],n=(0,i._)("i",{class:"fe fe-refresh-cw mr-1"},null,-1),l=(0,i.Uk)(" Refresh "),r=[n,l],m=(0,i._)("i",{class:"fe fe-plus mr-1"},null,-1),c=(0,i.Uk)(" Tambah "),u=[m,c],h=["onClick"],f=(0,i._)("i",{class:"fe fe-edit"},null,-1),b=[f],F={class:"row"},g={class:"col-12"},p=(0,i._)("button",{type:"submit",class:"d-none"},null,-1),w={class:"row"},v={class:"col-12"};function k(a,e,t,n,l,m){const c=(0,i.up)("a-table"),f=(0,i.up)("a-input"),k=(0,i.up)("a-form-item"),y=(0,i.up)("a-form"),_=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",d,[o,(0,i._)("div",null,[(0,i._)("button",{class:"btn btn-light mr-3",onClick:e[0]||(e[0]=(...e)=>a.refresh&&a.refresh(...e)),disabled:a.loading},r,8,s),(0,i._)("button",{class:"btn btn-light",onClick:e[1]||(e[1]=(...e)=>a.openAddFormModal&&a.openAddFormModal(...e))},u)])]),(0,i._)("div",null,[(0,i.Wm)(c,{columns:a.columns,"data-source":a.dataSource,"row-key":a=>a.id,loading:a.loading,scroll:{y:a.setting.maxTableContentHeight,x:!0}},{bodyCell:(0,i.w5)((({column:e,text:t})=>["action"===e.key?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn btn-light btn-sm",onClick:e=>a.openEditFormModal(t)},b,8,h)):(0,i.kq)("",!0)])),_:1},8,["columns","data-source","row-key","loading","scroll"])]),(0,i.Wm)(_,{class:"form-modal",visible:a.addFormModalVisible,"onUpdate:visible":e[3]||(e[3]=e=>a.addFormModalVisible=e),title:"Tambah Wilayah",confirmLoading:a.loadingAdd,onOk:a.handleAddFormSubmit},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{layout:"vertical",ref:"addFormRef",model:a.addFormState,rules:a.formRules,onFinish:a.handleAddFormSubmit},{default:(0,i.w5)((()=>[(0,i._)("div",F,[(0,i._)("div",g,[(0,i.Wm)(k,{ref:"name",label:"Nama",name:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{value:a.addFormState.name,"onUpdate:value":e[2]||(e[2]=e=>a.addFormState.name=e),placeholder:"Nama wilayah"},null,8,["value"])])),_:1},512)])]),p])),_:1},8,["model","rules","onFinish"])])),_:1},8,["visible","confirmLoading","onOk"]),(0,i.Wm)(_,{class:"form-modal",visible:a.editFormModalVisible,"onUpdate:visible":e[5]||(e[5]=e=>a.editFormModalVisible=e),title:"Update Wilayah",confirmLoading:a.loadingEdit,okButtonProps:{htmlType:"submit"},onOk:a.handleEditFormSubmit},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{layout:"vertical",ref:"editFormRef",model:a.editFormState,rules:a.formRules,onFinish:a.handleEditFormSubmit},{default:(0,i.w5)((()=>[(0,i._)("div",w,[(0,i._)("div",v,[(0,i.Wm)(k,{ref:"name",label:"Nama",name:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{value:a.editFormState.name,"onUpdate:value":e[4]||(e[4]=e=>a.editFormState.name=e),placeholder:"Nama wilayah"},null,8,["value"])])),_:1},512)])])])),_:1},8,["model","rules","onFinish"])])),_:1},8,["visible","confirmLoading","onOk"])])}var y=t(4870),_=t(7417),S=t(6705),D=t(1789),M=(0,i.aZ)({name:"District",setup(){const a=(0,_.oR)(),e=(0,i.Fl)((()=>a.getters["Setting/settings"])),t=(0,y.iH)(!1),d=(0,y.iH)(!1),o=()=>t.value=!0,s=a=>{d.value=!0,u.id=a.id,u.name=a.name},n=(0,y.iH)([{title:"#",key:"#",dataIndex:"seq",width:50},{title:"Nama",key:"name",dataIndex:"name"},{title:"Action",key:"action"}]),l=(0,y.iH)(),r=(0,y.qj)({name:void 0}),m={name:[{required:!0,trigger:"change",message:"Nama wilayah tidak boleh kosong"}]},c=(0,y.iH)(),u=(0,y.qj)({name:void 0,id:void 0});return{columns:n,setting:e,addFormRef:l,addFormState:r,editFormRef:c,editFormState:u,formRules:m,addFormModalVisible:t,editFormModalVisible:d,openAddFormModal:o,openEditFormModal:s}},data(){return{rowData:[],loading:!0,loadingAdd:!1,loadingEdit:!1}},computed:{dataSource(){return(0,S.p)(this.rowData)}},mounted(){this.fetchData()},methods:{async fetchData(){this.loading=!0;const a=await(0,D.w9)();a.success&&(this.rowData=a.data.data),this.loading=!1},refresh(){this.rowData=[],this.fetchData()},async addData(){this.loadingAdd=!0;const a=await(0,D.CT)({name:this.addFormState.name});a.success&&(this.addFormRef.resetFields(),this.refresh()),this.loadingAdd=!1},async editData(){this.loadingEdit=!0;const a=await(0,D.rc)(this.editFormState.id,{name:this.editFormState.name});a.success&&(this.editFormRef.resetFields(),this.editFormModalVisible=!1,this.refresh()),this.loadingEdit=!1},handleAddFormSubmit(){this.addFormRef?.validateFields().then((()=>this.addData())).catch((()=>{}))},handleEditFormSubmit(){this.editFormRef?.validateFields().then((()=>this.editData())).catch((()=>{}))}}}),W=t(89);const R=(0,W.Z)(M,[["render",k]]);var A=R}}]);