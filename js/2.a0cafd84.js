"use strict";(self["webpackChunksumatera_soil"]=self["webpackChunksumatera_soil"]||[]).push([[2],{4091:function(e,a,t){t.d(a,{$X:function(){return l},ZZ:function(){return s},_g:function(){return n},p7:function(){return o}});var i=t(9145);const r=new i.Z,n=(e={})=>r.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/reward_products",{params:e}),s=e=>r.withOptions({successFeedbackMessage:"Reward berhasil ditambahkan",showSuccessFeedback:!0}).axiosInstance.post("/administrator/reward_products",e),o=e=>r.withOptions({showProgressBar:!1}).axiosInstance.get(`/administrator/reward_products/${e}`),l=(e,a)=>r.withOptions({successFeedbackMessage:"Reward berhasil diperbarui",showSuccessFeedback:!0}).axiosInstance.put(`/administrator/reward_products/${e}`,a)},7776:function(e,a,t){t.d(a,{Z:function(){return S}});var i=t(3396),r=t(9242);const n=e=>((0,i.dD)("data-v-1f202da3"),e=e(),(0,i.Cn)(),e),s=["src"],o={key:2},l=n((()=>(0,i._)("div",{class:"ant-upload-text"},"Upload",-1)));function d(e,a,t,n,d,c){const m=(0,i.up)("plus-outlined"),u=(0,i.up)("a-upload"),p=(0,i.up)("a-image");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(u,{name:"icon",listType:"picture-card",accept:".png,.jpg,.jpeg",class:"avatar-uploader-has-overlay","show-upload-list":!1,beforeUpload:()=>!1,onChange:e.onChange},{default:(0,i.w5)((()=>[(0,i._)("div",null,[e.imgUrl?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"avatar-uploader-overlay",onClick:a[2]||(a[2]=(0,r.iM)((()=>{}),["stop"]))},[(0,i._)("i",{class:"fe fe-eye mr-2",onClick:a[0]||(a[0]=(0,r.iM)(((...a)=>e.openImgPreview&&e.openImgPreview(...a)),["stop"]))}),(0,i._)("i",{class:"fe fe-trash-2",onClick:a[1]||(a[1]=(0,r.iM)(((...a)=>e.onDelete&&e.onDelete(...a)),["stop"]))})])):(0,i.kq)("",!0),e.imgUrl?((0,i.wg)(),(0,i.iD)("img",{key:1,class:"upload-image-thumbnail",src:e.imgUrl,alt:""},null,8,s)):((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(m),l]))])])),_:1},8,["beforeUpload","onChange"]),(0,i.Wm)(p,{style:{display:"none"},preview:{visible:e.imgPreviewVisible,onVisibleChange:e.imgPreviewVisibleChange},src:e.imgUrl},null,8,["preview","src"])])}var c=t(4870),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},u=m,p=t(9388);function g(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(a){h(e,a,t[a])}))}return e}function h(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var f=function(e,a){var t=g({},e,a.attrs);return(0,i.Wm)(p.Z,g({},t,{icon:u}),null)};f.displayName="PlusOutlined",f.inheritAttrs=!1;var v=f;const _=(e,a)=>{const t=new FileReader;t.addEventListener("load",(()=>a(t.result))),t.readAsDataURL(e)};var w=(0,i.aZ)({name:"UploadImage",props:{imgUrl:String,changeImg:Function},components:{PlusOutlined:v},setup(){const e=(0,c.iH)(!1),a=a=>{e.value=a},t=()=>{e.value=!0};return{imgPreviewVisible:e,imgPreviewVisibleChange:a,openImgPreview:t}},methods:{checkImageUpload(e){const a="image/jpeg"===e.type||"image/png"===e.type||"image/jpeg"===e.type;let t=!0;a||(this.$message.error("Format file tidak didukung"),t=!1);const i=e.size/1024/1024<2;return i||(this.$message.error("Ukuran file terlalu besar"),t=!1),t},onChange(e){this.checkImageUpload(e.file)&&_(e.file,(a=>{this.$emit("changeImg",a,e.file)}))},onDelete(){this.$emit("changeImg","",null)}}}),b=t(89);const k=(0,b.Z)(w,[["render",d],["__scopeId","data-v-1f202da3"]]);var S=k},5002:function(e,a,t){t.r(a),t.d(a,{default:function(){return O}});var i=t(3396);const r=(0,i._)("div",{class:"content-title"},[(0,i._)("h5",{class:"m-0"},"Detail Reward")],-1),n={class:"card"},s={class:"card-body"},o={class:"row mb-2"},l={class:"col-12 col-md-6"},d={class:"row"},c={class:"col-12 col-md-6"},m={class:"row"},u={class:"col-12 col-md-6"},p={class:"row"},g={class:"col-12 col-md-6"},h={class:"row mb-2"},f={class:"col-sm-6 col-md-3"},v={class:"row mb mt-3"},_={class:"col-md-6 mb-2"},w=["disabled"],b=(0,i._)("span",{class:"btn-addon"},[(0,i._)("i",{class:"btn-addon-icon fe fe-send"})],-1),k=(0,i.Uk)(" Simpan "),S=[b,k];function y(e,a,t,b,k,y){const U=(0,i.up)("a-input"),C=(0,i.up)("a-form-item"),I=(0,i.up)("a-input-number"),P=(0,i.up)("a-textarea"),W=(0,i.up)("upload-image"),D=(0,i.up)("a-form"),O=(0,i.up)("a-spin");return(0,i.wg)(),(0,i.iD)("div",null,[r,(0,i.Wm)(O,{spinning:e.loadingGet},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i._)("div",s,[(0,i.Wm)(D,{ref:"formRef",layout:"vertical",model:e.formState,rules:e.formRules,onFinish:e.handleEdit},{default:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i._)("div",l,[(0,i.Wm)(C,{ref:"name",label:"Nama Reward",name:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{value:e.formState.name,"onUpdate:value":a[0]||(a[0]=a=>e.formState.name=a),placeholder:"Nama Reward"},null,8,["value"])])),_:1},512)])]),(0,i._)("div",d,[(0,i._)("div",c,[(0,i.Wm)(C,{ref:"price_in_point",label:"Cost (Point)",name:"price_in_point"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{value:e.formState.price_in_point,"onUpdate:value":a[1]||(a[1]=a=>e.formState.price_in_point=a),placeholder:"Cost",style:{width:"100%"}},null,8,["value"])])),_:1},512)])]),(0,i._)("div",m,[(0,i._)("div",u,[(0,i.Wm)(C,{ref:"stock",label:"Stok",name:"stock"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{value:e.formState.stock,"onUpdate:value":a[2]||(a[2]=a=>e.formState.stock=a),placeholder:"Cost",style:{width:"100%"}},null,8,["value"])])),_:1},512)])]),(0,i._)("div",p,[(0,i._)("div",g,[(0,i.Wm)(C,{ref:"description",label:"Deskripsi",name:"description"},{default:(0,i.w5)((()=>[(0,i.Wm)(P,{value:e.formState.description,"onUpdate:value":a[3]||(a[3]=a=>e.formState.description=a),placeholder:"Deskripsi"},null,8,["value"])])),_:1},512)])]),(0,i._)("div",h,[(0,i._)("div",f,[(0,i.Wm)(C,{ref:"image",label:"Gambar",name:"image"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{"img-url":e.imageUrl,onChangeImg:e.onChangeImg},null,8,["img-url","onChangeImg"])])),_:1},512)])]),(0,i._)("div",v,[(0,i._)("div",_,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-with-addon",disabled:e.loadingSubmit},S,8,w)])])])),_:1},8,["model","rules","onFinish"])])])])),_:1},8,["spinning"])])}var U=t(4870),C=t(7776),I=t(4091),P=(0,i.aZ)({name:"EditReward",props:{id:String},components:{UploadImage:C.Z},setup(){const e=(0,U.iH)(),a=(0,U.qj)({name:void 0,description:void 0,image:void 0,price_in_point:void 0,stock:void 0}),t={name:[{required:!0,message:"Nama produk tidak boleh kosong",trigger:"change"}],price_in_point:[{required:!0,message:"Harga produk tidak boleh kosong",trigger:"change"}],stock:[{required:!0,message:"Stok produk tidak boleh kosong",trigger:"change"}]},i=(0,U.iH)(""),r=(t,r)=>{i.value=t,a.image=r,e.value?.validateFields("image")};return{formRef:e,formState:a,formRules:t,imageUrl:i,onChangeImg:r}},data(){return{reward:void 0,loadingSubmit:!1,loadingGet:!0}},mounted(){this.fetchReward()},methods:{async fetchReward(){this.loadingGet=!0;const e=await(0,I.p7)(this.$props.id);e.success&&(this.reward=e.data,this.formState.name=e.data.name,this.formState.stock=e.data.stock,this.formState.price_in_point=parseFloat(e.data.price_in_point),this.formState.description=e.data.description,this.formState.image=e.data.image_url,this.imageUrl=e.data.image_url),this.loadingGet=!1},async onSubmit(){const e=new FormData;e.append("name",this.formState.name),e.append("price_in_point",this.formState.price_in_point.toString()),e.append("stock",this.formState.stock.toString()),e.append("description",this.formState.description),this.formState.image!==this.reward?.image_url&&e.append("image",this.formState.image);const a=await(0,I.$X)(this.$props.id,e);a.success&&(this.reward=a.data,this.formState.name=a.data.name,this.formState.stock=a.data.stock,this.formState.price_in_point=parseFloat(a.data.price_in_point),this.formState.description=a.data.description,this.formState.image=a.data.image_url,this.imageUrl=a.data.image_url)},handleEdit(){this.formRef.validateFields().then((()=>this.onSubmit())).catch((()=>{}))}}}),W=t(89);const D=(0,W.Z)(P,[["render",y]]);var O=D}}]);