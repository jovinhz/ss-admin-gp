"use strict";(self["webpackChunksumatera_soil"]=self["webpackChunksumatera_soil"]||[]).push([[923],{9763:function(t,a,i){i.d(a,{Ay:function(){return s},Mq:function(){return r},ci:function(){return n}});var e=i(9145);const o=new e.Z,s=(t={limit:1e4})=>o.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/products",{params:t}),r=t=>o.withOptions({showProgressBar:!1}).axiosInstance.get(`/administrator/products/${t}`),n=(t,a)=>o.withOptions({successFeedbackMessage:"Komoditi berhasil diperbarui",showSuccessFeedback:!0}).axiosInstance.put(`/administrator/products/${t}`,a)},1923:function(t,a,i){i.r(a),i.d(a,{default:function(){return y}});var e=i(3396);const o=t=>((0,e.dD)("data-v-2b59c8b4"),t=t(),(0,e.Cn)(),t),s=o((()=>(0,e._)("div",{class:"content-title"},[(0,e._)("h5",null,"Dashboard")],-1))),r={class:"row"},n={class:"col-12"},l=o((()=>(0,e._)("div",{class:"dashboard-section-title d-flex align-items-center mb-3"},[(0,e._)("span",{class:"color-box"}),(0,e._)("h6",{class:"m-0"},"Sebaran")],-1))),d=(0,e.Uk)("Petani"),m=(0,e.Uk)("QC");function c(t,a,i,o,c,u){const p=(0,e.up)("a-select-option"),h=(0,e.up)("a-select"),f=(0,e.up)("GMapMarker"),g=(0,e.up)("GMapMap");return(0,e.wg)(),(0,e.iD)("div",null,[s,(0,e._)("div",null,[(0,e._)("div",r,[(0,e._)("div",n,[l,(0,e.Wm)(h,{class:"mr-3",style:{width:"120px"},value:t.roleFilter,"onUpdate:value":a[0]||(a[0]=a=>t.roleFilter=a)},{default:(0,e.w5)((()=>[(0,e.Wm)(p,{value:"farmer"},{default:(0,e.w5)((()=>[d])),_:1}),(0,e.Wm)(p,{value:"qc"},{default:(0,e.w5)((()=>[m])),_:1})])),_:1},8,["value"]),(0,e.Wm)(h,{style:{width:"150px"},value:t.commodityFilter,"onUpdate:value":a[1]||(a[1]=a=>t.commodityFilter=a),options:t.commodityOptions,placeholder:"Pilih komoditi",loading:t.loadingCommodity,onChange:t.handleCommodityChange},null,8,["value","options","loading","onChange"]),(0,e.Wm)(g,{ref:"mapRef",center:t.center,zoom:8,style:{width:"100%",height:"calc(100vh - 280px)","margin-top":"20px"}},{default:(0,e.w5)((()=>[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.markers,((t,a)=>((0,e.wg)(),(0,e.j4)(f,{key:a,position:t},null,8,["position"])))),128))])),_:1},8,["center"])])])])])}var u=i(4870),p=i(9763),h=i(9145);const f=new h.Z,g=t=>f.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/pages/farmer_distribution_map",{params:t});var v=(0,e.aZ)({name:"Dashboard",setup(){const t=(0,u.iH)(),a=(0,u.iH)("farmer"),i=(0,u.iH)();return{mapRef:t,roleFilter:a,commodityFilter:i}},mounted(){this.fetchCommodities()},data(){return{commodities:[],loadingCommodity:!1,farmerDistributionMap:void 0,qcDistributionMap:void 0,center:{lat:3.708412,lng:98.354582},markers:[]}},computed:{commodityOptions(){return this.commodities.map((t=>({value:t.id,label:t.name})))}},methods:{async fetchCommodities(){this.loadingCommodity=!0;const t=await(0,p.Ay)();t.success&&(this.commodities=t.data.data),this.loadingCommodity=!1},async fetchFarmerDistributionMap(){if(!this.commodityFilter)return;const t=await g({product_id:this.commodityFilter});t.success&&(this.farmerDistributionMap=t.data,this.markers=t.data.data.map((t=>({lat:parseFloat(t.farmer.latitude),lng:parseFloat(t.farmer.longitude)}))),console.log(this.markers))},handleCommodityChange(){"farmer"===this.roleFilter&&this.fetchFarmerDistributionMap()}}}),w=i(89);const b=(0,w.Z)(v,[["render",c],["__scopeId","data-v-2b59c8b4"]]);var y=b}}]);