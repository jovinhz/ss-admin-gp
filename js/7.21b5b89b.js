"use strict";(self["webpackChunksumatera_soil"]=self["webpackChunksumatera_soil"]||[]).push([[7],{1789:function(a,e,t){t.d(e,{CT:function(){return o},rc:function(){return d},w9:function(){return r}});var s=t(9145);const i=new s.Z,r=(a={limit:1e4})=>i.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/districts",{params:a}),o=a=>i.withOptions({successFeedbackMessage:"Wilayah berhasil ditambahkan",showSuccessFeedback:!0}).axiosInstance.post("/administrator/districts",a),d=(a,e)=>i.withOptions({successFeedbackMessage:"Wilayah berhasil diperbarui",showSuccessFeedback:!0}).axiosInstance.put(`/administrator/districts/${a}`,e)},5334:function(a,e,t){t.d(e,{UC:function(){return o},UK:function(){return d},pO:function(){return r},u6:function(){return n}});var s=t(9145);const i=new s.Z,r=(a={limit:1e4})=>i.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/warehouses",{params:a}),o=a=>i.withOptions({successFeedbackMessage:"QC berhasil ditambahkan",showSuccessFeedback:!0}).axiosInstance.post("/administrator/warehouses",a),d=a=>i.withOptions({showProgressBar:!1}).axiosInstance.get(`/administrator/warehouses/${a}`),n=(a,e)=>i.withOptions({successFeedbackMessage:"QC berhasil diperbarui",showSuccessFeedback:!0}).axiosInstance.put(`/administrator/warehouses/${a}`,e)},7776:function(a,e,t){t.d(e,{Z:function(){return k}});var s=t(3396),i=t(9242);const r=a=>((0,s.dD)("data-v-1f202da3"),a=a(),(0,s.Cn)(),a),o=["src"],d={key:2},n=r((()=>(0,s._)("div",{class:"ant-upload-text"},"Upload",-1)));function l(a,e,t,r,l,m){const c=(0,s.up)("plus-outlined"),u=(0,s.up)("a-upload"),g=(0,s.up)("a-image");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{name:"icon",listType:"picture-card",accept:".png,.jpg,.jpeg",class:"avatar-uploader-has-overlay","show-upload-list":!1,beforeUpload:()=>!1,onChange:a.onChange},{default:(0,s.w5)((()=>[(0,s._)("div",null,[a.imgUrl?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"avatar-uploader-overlay",onClick:e[2]||(e[2]=(0,i.iM)((()=>{}),["stop"]))},[(0,s._)("i",{class:"fe fe-eye mr-2",onClick:e[0]||(e[0]=(0,i.iM)(((...e)=>a.openImgPreview&&a.openImgPreview(...e)),["stop"]))}),(0,s._)("i",{class:"fe fe-trash-2",onClick:e[1]||(e[1]=(0,i.iM)(((...e)=>a.onDelete&&a.onDelete(...e)),["stop"]))})])):(0,s.kq)("",!0),a.imgUrl?((0,s.wg)(),(0,s.iD)("img",{key:1,class:"upload-image-thumbnail",src:a.imgUrl,alt:""},null,8,o)):((0,s.wg)(),(0,s.iD)("div",d,[(0,s.Wm)(c),n]))])])),_:1},8,["beforeUpload","onChange"]),(0,s.Wm)(g,{style:{display:"none"},preview:{visible:a.imgPreviewVisible,onVisibleChange:a.imgPreviewVisibleChange},src:a.imgUrl},null,8,["preview","src"])])}var m=t(4870),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},u=c,g=t(9388);function h(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?Object(arguments[e]):{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})))),s.forEach((function(e){p(a,e,t[e])}))}return a}function p(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var f=function(a,e){var t=h({},a,e.attrs);return(0,s.Wm)(g.Z,h({},t,{icon:u}),null)};f.displayName="PlusOutlined",f.inheritAttrs=!1;var w=f;const _=(a,e)=>{const t=new FileReader;t.addEventListener("load",(()=>e(t.result))),t.readAsDataURL(a)};var v=(0,s.aZ)({name:"UploadImage",props:{imgUrl:String,changeImg:Function},components:{PlusOutlined:w},setup(){const a=(0,m.iH)(!1),e=e=>{a.value=e},t=()=>{a.value=!0};return{imgPreviewVisible:a,imgPreviewVisibleChange:e,openImgPreview:t}},methods:{checkImageUpload(a){const e="image/jpeg"===a.type||"image/png"===a.type||"image/jpeg"===a.type;let t=!0;e||(this.$message.error("Format file tidak didukung"),t=!1);const s=a.size/1024/1024<2;return s||(this.$message.error("Ukuran file terlalu besar"),t=!1),t},onChange(a){this.checkImageUpload(a.file)&&_(a.file,(e=>{this.$emit("changeImg",e,a.file)}))},onDelete(){this.$emit("changeImg","",null)}}}),b=t(89);const S=(0,b.Z)(v,[["render",l],["__scopeId","data-v-1f202da3"]]);var k=S},7007:function(a,e,t){t.r(e),t.d(e,{default:function(){return B}});var s=t(3396);const i=(0,s._)("div",{class:"content-title"},[(0,s._)("h5",{class:"m-0"},"Detail QC")],-1),r={class:"row"},o={class:"col-12 col-md-6"},d={class:"card"},n=(0,s._)("div",{class:"card-header"},[(0,s._)("h6",{class:"mb-0"},"Profil")],-1),l={class:"card-body"},m={class:"row mb-2"},c={class:"col-12"},u={class:"row"},g={class:"col-12"},h={class:"row"},p={class:"col-12"},f={class:"row"},w={class:"col-12"},_={class:"row mb-2"},v={class:"col-6"},b={class:"col-6"},S={class:"row mb-2"},k={class:"col-6"},y={class:"col-6"},C={class:"row mb mt-3"},P={class:"col-md-6 mb-2"},F=["disabled"],U=(0,s._)("span",{class:"btn-addon"},[(0,s._)("i",{class:"btn-addon-icon fe fe-send"})],-1),W=(0,s.Uk)(" Simpan "),I=[U,W],q={class:"col-12 col-md-6"},O={class:"card"},D=(0,s._)("div",{class:"card-header"},[(0,s._)("h6",{class:"mb-0"},"Password")],-1),R={class:"card-body"},j={class:"row"},L={class:"col-12"},$={class:"row"},x={class:"col-12"},H=["disabled"];function M(a,e,t,U,W,M){const Z=(0,s.up)("a-input"),K=(0,s.up)("a-form-item"),N=(0,s.up)("a-select"),Q=(0,s.up)("upload-image"),V=(0,s.up)("a-form"),A=(0,s.up)("a-input-password"),E=(0,s.up)("a-spin");return(0,s.wg)(),(0,s.iD)("div",null,[i,(0,s.Wm)(E,{spinning:a.loadingGet},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",o,[(0,s._)("div",d,[n,(0,s._)("div",l,[(0,s.Wm)(V,{ref:"formRef",layout:"vertical",model:a.formState,rules:a.formRules,onFinish:a.handleEdit},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s._)("div",c,[(0,s.Wm)(K,{ref:"name",label:"Nama",name:"name"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{value:a.formState.name,"onUpdate:value":e[0]||(e[0]=e=>a.formState.name=e),placeholder:"Nama QC"},null,8,["value"])])),_:1},512)])]),(0,s._)("div",u,[(0,s._)("div",g,[(0,s.Wm)(K,{ref:"phone_number",label:"No HP",name:"phone_number"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{value:a.formState.phone_number,"onUpdate:value":e[1]||(e[1]=e=>a.formState.phone_number=e),placeholder:"No HP"},null,8,["value"])])),_:1},512)])]),(0,s._)("div",h,[(0,s._)("div",p,[(0,s.Wm)(K,{ref:"district_id",label:"Wilayah",name:"district_id"},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{ref:"select",style:{width:"100%"},placeholder:"Pilih wilayah",value:a.formState.district_id,"onUpdate:value":e[2]||(e[2]=e=>a.formState.district_id=e),"show-search":"",options:a.districtOptions,"filter-option":a.filterOption},null,8,["value","options","filter-option"])])),_:1},512)])]),(0,s._)("div",f,[(0,s._)("div",w,[(0,s.Wm)(K,{ref:"address",label:"Alamat",name:"address"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{value:a.formState.address,"onUpdate:value":e[3]||(e[3]=e=>a.formState.address=e),placeholder:"Alamat lengkap"},null,8,["value"])])),_:1},512)])]),(0,s._)("div",_,[(0,s._)("div",v,[(0,s.Wm)(K,{ref:"latitude",label:"Latitude",name:"latitude"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{value:a.formState.latitude,"onUpdate:value":e[4]||(e[4]=e=>a.formState.latitude=e),placeholder:"Latitude"},null,8,["value"])])),_:1},512)]),(0,s._)("div",b,[(0,s.Wm)(K,{ref:"longitude",label:"Longitude",name:"longitude"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{value:a.formState.longitude,"onUpdate:value":e[5]||(e[5]=e=>a.formState.longitude=e),placeholder:"Longitude"},null,8,["value"])])),_:1},512)])]),(0,s._)("div",S,[(0,s._)("div",k,[(0,s.Wm)(K,{ref:"image",label:"Foto",name:"image"},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,{"img-url":a.imageUrl,onChangeImg:a.onChangeImg},null,8,["img-url","onChangeImg"])])),_:1},512)]),(0,s._)("div",y,[(0,s.Wm)(K,{ref:"resident_card_image",label:"Foto KTP",name:"resident_card_image"},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,{"img-url":a.residentCardImageUrl,onChangeImg:a.onChangeResidentImg},null,8,["img-url","onChangeImg"])])),_:1},512)])]),(0,s._)("div",C,[(0,s._)("div",P,[(0,s._)("button",{type:"submit",class:"btn btn-primary btn-with-addon",disabled:a.loadingSubmit},I,8,F)])])])),_:1},8,["model","rules","onFinish"])])])]),(0,s._)("div",q,[(0,s._)("div",O,[D,(0,s._)("div",R,[(0,s.Wm)(V,{layout:"vertical",ref:"passwordFormRef",model:a.passwordFormState,rules:a.passwordRules,onFinish:a.handleChangePassword},{default:(0,s.w5)((()=>[(0,s._)("div",j,[(0,s._)("div",L,[(0,s.Wm)(K,{ref:"password",label:"Password",name:"password"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{value:a.passwordFormState.password,"onUpdate:value":e[6]||(e[6]=e=>a.passwordFormState.password=e),placeholder:"Password"},null,8,["value"])])),_:1},512)])]),(0,s._)("div",$,[(0,s._)("div",x,[(0,s.Wm)(K,{ref:"password_confirmation",label:"Konfirmasi Password",name:"password_confirmation"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{value:a.passwordFormState.password_confirmation,"onUpdate:value":e[7]||(e[7]=e=>a.passwordFormState.password_confirmation=e),placeholder:"Konfirmasi Password"},null,8,["value"])])),_:1},512)])]),(0,s._)("button",{type:"submit",class:"btn btn-primary",disabled:a.loadingChangePassword}," Simpan Password ",8,H)])),_:1},8,["model","rules","onFinish"])])])])])])),_:1},8,["spinning"])])}t(6699);var Z=t(4870),K=t(5334),N=t(1789),Q=t(7776),V=(0,s.aZ)({name:"EditQualityControl",props:{id:String},components:{UploadImage:Q.Z},setup(){const a=(0,Z.iH)(),e=(0,Z.qj)({password:void 0,password_confirmation:void 0}),t=async(a,t)=>""===t?Promise.reject("Konfirmasi password tidak boleh kosong."):t!==e.password?Promise.reject("Password dan Konfirmasi password harus sama."):Promise.resolve(),s={password:[{required:!0,trigger:"change",message:"Password tidak boleh kosong"}],password_confirmation:[{required:!0,trigger:"change",validator:t}]},i=(0,Z.iH)(),r=(0,Z.qj)({name:void 0,address:void 0,district_id:void 0,latitude:void 0,longitude:void 0,phone_number:void 0,image:void 0,resident_card_image:void 0}),o={name:[{required:!0,trigger:"change",message:"Nama tidak boleh kosong"}],phone_number:[{required:!0,trigger:"change",message:"No HP tidak boleh kosong"}],district_id:[{required:!0,trigger:"change",message:"Wilayah tidak boleh kosong"}],address:[{required:!0,trigger:"change",message:"Alamat tidak boleh kosong"}],latitude:[{required:!0,trigger:"change",message:"Latitude tidak boleh kosong"}],longitude:[{required:!0,trigger:"change",message:"Longitude tidak boleh kosong"}],image:[{required:!0,message:"Foto tidak boleh kosong",trigger:"blur"}],resident_card_image:[{required:!0,message:"Foto KTP tidak boleh kosong",trigger:"blur"}]},d=(0,Z.iH)(""),n=(0,Z.iH)(""),l=(a,e)=>{d.value=a,r.image=e,i.value?.validateFields("image")},m=(a,e)=>{n.value=a,r.resident_card_image=e,i.value?.validateFields("resident_card_image")},c=(a,e)=>e.label.toLowerCase().includes(a.toLocaleLowerCase());return{formRef:i,formState:r,formRules:o,imageUrl:d,residentCardImageUrl:n,passwordFormRef:a,passwordFormState:e,passwordRules:s,onChangeImg:l,onChangeResidentImg:m,filterOption:c}},data(){return{districts:[],qc:void 0,loadingSubmit:!1,loadingGet:!0,loadingChangePassword:!1}},computed:{districtOptions(){return this.districts.map((a=>({value:a.id,label:a.name})))}},mounted(){this.fetchQc(),this.fetchDistricts()},methods:{async fetchDistricts(){const a=await(0,N.w9)();a.data.success&&(this.districts=a.data.data)},async fetchQc(){this.loadingGet=!0;const a=await(0,K.UK)(this.$props.id);a.data.success&&(this.qc=a.data.data,this.formState.name=a.data.data.name,this.formState.address=a.data.data.address,this.formState.latitude=a.data.data.latitude,this.formState.longitude=a.data.data.longitude,this.formState.phone_number=a.data.data.phone_number,this.formState.district_id=a.data.data.district.id,this.formState.image=a.data.data.image_url,this.formState.resident_card_image=a.data.data.resident_card_image_url,this.imageUrl=a.data.data.image_url,this.residentCardImageUrl=a.data.data.resident_card_image_url),this.loadingGet=!1},async onSubmit(){const a=new FormData;for(let t in this.formState)"district_id"!==t?"image"!==t?"resident_card_image"!==t?this.formState[t]!==this.qc[t]&&a.append(t,this.formState[t]):this.formState.resident_card_image!==this.qc.resident_card_image_url&&a.append(t,this.formState[t]):this.formState.image!==this.qc.image_url&&a.append(t,this.formState[t]):this.formState.district_id!==this.qc.district.id&&a.append(t,this.formState[t]);const e=await(0,K.u6)(this.$props.id,a);e.data.success&&(this.qc=e.data.data,this.formState.name=e.data.data.name,this.formState.address=e.data.data.address,this.formState.latitude=e.data.data.latitude,this.formState.longitude=e.data.data.longitude,this.formState.phone_number=e.data.data.phone_number,this.formState.district_id=e.data.data.district.id,this.formState.image=e.data.data.image_url,this.formState.resident_card_image=e.data.data.resident_card_image_url,this.imageUrl=e.data.data.image_url,this.residentCardImageUrl=e.data.data.resident_card_image_url)},async submitChangePassword(){this.loadingChangePassword=!0;const a=await(0,K.u6)(this.$props.id,{password:this.passwordFormState.password,password_confirmation:this.passwordFormState.password_confirmation});a.data.success&&this.passwordFormRef.resetFields(),this.loadingChangePassword=!1},handleChangePassword(){this.passwordFormRef.validateFields().then((()=>{this.submitChangePassword()})).catch((()=>{}))},handleEdit(){this.formRef.validateFields().then((()=>this.onSubmit())).catch((()=>{}))}}}),A=t(89);const E=(0,A.Z)(V,[["render",M]]);var B=E}}]);