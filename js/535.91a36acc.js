"use strict";(self["webpackChunksumatera_soil"]=self["webpackChunksumatera_soil"]||[]).push([[535],{9535:function(a,t,i){i.r(t),i.d(t,{default:function(){return W}});i(6699);var s=i(3396),e=i(7139);const n={class:"content-title"},o=(0,s._)("h5",null,"Konfigurasi Sistem",-1),d=["disabled"],l=(0,s._)("i",{class:"fe fe-refresh-cw mr-1"},null,-1),c=(0,s.Uk)(" Refresh "),r=[l,c],u={key:0,class:"text-center"},f={key:1},p={class:"card"},g={class:"card-body"},h={class:"row"},m={class:"col-12 col-md-6"},_={class:"mb-1"},w={key:0,class:"d-block text-muted"},v=(0,s.Uk)(" Simpan ");function b(a,t,i,l,c,b){const k=(0,s.up)("a-spin"),y=(0,s.up)("a-input"),S=(0,s.up)("a-button"),U=(0,s.up)("a-form-item"),C=(0,s.up)("a-form");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",n,[o,(0,s._)("div",null,[(0,s._)("button",{class:"btn btn-light mr-3",onClick:t[0]||(t[0]=(...t)=>a.refresh&&a.refresh(...t)),disabled:a.loading},r,8,d)])]),a.loading?((0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(k,{spinning:!0})])):((0,s.wg)(),(0,s.iD)("div",f,[(0,s.Wm)(C,{ref:"formRef",layout:"vertical",model:a.formState},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s._)("div",g,[(0,s._)("div",h,[(0,s._)("div",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.formState.configs,(t=>((0,s.wg)(),(0,s.j4)(U,{name:["configs",t.id],key:t.id},{default:(0,s.w5)((()=>[(0,s._)("div",_,[(0,s._)("span",null,(0,e.zw)(t.description),1),t.updated_by?((0,s.wg)(),(0,s.iD)("span",w," Terakhir di-update pada "+(0,e.zw)(t.updated_at_caption)+" oleh "+(0,e.zw)(t.updated_by.name),1)):(0,s.kq)("",!0)]),(0,s.Wm)(y,{value:t.value,"onUpdate:value":a=>t.value=a},null,8,["value","onUpdate:value"]),(0,s.Wm)(S,{class:"mt-2 mb-3",type:"primary",size:"small",onClick:i=>a.updateConfig(t.id),loading:a.loadingUpdates.includes(t.id)},{default:(0,s.w5)((()=>[v])),_:2},1032,["onClick","loading"])])),_:2},1032,["name"])))),128))])])])])])),_:1},8,["model"])]))])}var k=i(4870),y=i(9145);const S=new y.Z,U=()=>S.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/application_configurations"),C=(a,t)=>S.withOptions({showProgressBar:!1,showSuccessFeedback:!0,showErrorFeedback:!0}).axiosInstance.put(`/administrator/application_configurations/${a}`,{value:t});var D=(0,s.aZ)({name:"AppConfig",setup(){const a=(0,k.iH)(),t=(0,k.qj)({configs:[]});return{formRef:a,formState:t}},data(){return{configs:[],loading:!1,loadingUpdates:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.loading=!0;const a=await U();a.data.success&&(this.configs=a.data.data,this.configs.forEach((a=>{this.formState.configs.push(a)}))),this.loading=!1},async updateConfig(a){this.loadingUpdates.push(a);const t=this.formState.configs.find((t=>t.id===a));if(t){const i=await C(a,t.value);i.data.success&&(t.updated_by=i.data.data.updated_by,t.updated_at_caption=i.data.data.updated_at_caption)}this.loadingUpdates=this.loadingUpdates.filter((t=>t!==a))},refresh(){this.configs=[],this.formState.configs=[],this.fetchData()}}}),x=i(89);const z=(0,x.Z)(D,[["render",b]]);var W=z}}]);