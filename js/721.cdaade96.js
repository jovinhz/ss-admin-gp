"use strict";(self["webpackChunksumatera_soil"]=self["webpackChunksumatera_soil"]||[]).push([[721],{6524:function(a,s,e){e.d(s,{Wj:function(){return r},aq:function(){return n},be:function(){return d},uV:function(){return i}});var t=e(9145);const o=new t.Z,r=(a={limit:1e4})=>o.withOptions({showProgressBar:!1}).axiosInstance.get("/administrator/administrators",{params:a}),i=a=>o.withOptions({successFeedbackMessage:"Admin berhasil ditambahkan",showSuccessFeedback:!0}).axiosInstance.post("/administrator/administrators",a),d=a=>o.withOptions({showProgressBar:!1}).axiosInstance.get(`/administrator/administrators/${a}`),n=(a,s)=>o.withOptions({successFeedbackMessage:"Admin berhasil diperbarui",showSuccessFeedback:!0}).axiosInstance.put(`/administrator/administrators/${a}`,s)},9721:function(a,s,e){e.r(s),e.d(s,{default:function(){return K}});var t=e(3396);const o=(0,t._)("div",{class:"content-title"},[(0,t._)("h5",{class:"m-0"},"Detail Admin")],-1),r={class:"row"},i={class:"col-12 col-md-6"},d={class:"card"},n=(0,t._)("div",{class:"card-header"},[(0,t._)("h6",{class:"mb-0"},"Profil")],-1),m={class:"card-body"},l={class:"row mb-2"},c={class:"col-12"},u={class:"row mb-2"},h={class:"col-12"},w={class:"row mb-2"},p={class:"col-12"},f={class:"row mb mt-3"},_={class:"col-md-6 mb-2"},v=["disabled"],b=(0,t._)("span",{class:"btn-addon"},[(0,t._)("i",{class:"btn-addon-icon fe fe-send"})],-1),g=(0,t.Uk)(" Simpan "),S=[b,g],F={class:"col-12 col-md-6"},k={class:"card"},P=(0,t._)("div",{class:"card-header"},[(0,t._)("h6",{class:"mb-0"},"Password")],-1),C={class:"card-body"},W={class:"row"},y={class:"col-12"},R={class:"row"},q={class:"col-12"},A=["disabled"];function U(a,s,e,b,g,U){const j=(0,t.up)("a-input"),$=(0,t.up)("a-form-item"),x=(0,t.up)("a-switch"),G=(0,t.up)("a-form"),I=(0,t.up)("a-input-password"),K=(0,t.up)("a-spin");return(0,t.wg)(),(0,t.iD)("div",null,[o,(0,t.Wm)(K,{spinning:a.loadingGet},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("div",i,[(0,t._)("div",d,[n,(0,t._)("div",m,[(0,t.Wm)(G,{ref:"formRef",layout:"vertical",model:a.formState,rules:a.formRules,onFinish:a.handleEdit},{default:(0,t.w5)((()=>[(0,t._)("div",l,[(0,t._)("div",c,[(0,t.Wm)($,{ref:"name",label:"Nama",name:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{value:a.formState.name,"onUpdate:value":s[0]||(s[0]=s=>a.formState.name=s),placeholder:"Nama QC"},null,8,["value"])])),_:1},512)])]),(0,t._)("div",u,[(0,t._)("div",h,[(0,t.Wm)($,{ref:"username",label:"Username",name:"username"},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{value:a.formState.username,"onUpdate:value":s[1]||(s[1]=s=>a.formState.username=s),placeholder:"Username"},null,8,["value"])])),_:1},512)])]),(0,t._)("div",w,[(0,t._)("div",p,[(0,t.Wm)($,{label:"Status"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{checked:1===a.formState.status_id,"checked-children":"Aktif","un-checked-children":"Nonaktif",onChange:a.onStatusChange},null,8,["checked","onChange"])])),_:1})])]),(0,t._)("div",f,[(0,t._)("div",_,[(0,t._)("button",{type:"submit",class:"btn btn-primary btn-with-addon",disabled:a.loadingSubmit},S,8,v)])])])),_:1},8,["model","rules","onFinish"])])])]),(0,t._)("div",F,[(0,t._)("div",k,[P,(0,t._)("div",C,[(0,t.Wm)(G,{layout:"vertical",ref:"passwordFormRef",model:a.passwordFormState,rules:a.passwordRules,onFinish:a.handleChangePassword},{default:(0,t.w5)((()=>[(0,t._)("div",W,[(0,t._)("div",y,[(0,t.Wm)($,{ref:"password",label:"Password",name:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{value:a.passwordFormState.password,"onUpdate:value":s[2]||(s[2]=s=>a.passwordFormState.password=s),placeholder:"Password"},null,8,["value"])])),_:1},512)])]),(0,t._)("div",R,[(0,t._)("div",q,[(0,t.Wm)($,{ref:"password_confirmation",label:"Konfirmasi Password",name:"password_confirmation"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{value:a.passwordFormState.password_confirmation,"onUpdate:value":s[3]||(s[3]=s=>a.passwordFormState.password_confirmation=s),placeholder:"Konfirmasi Password"},null,8,["value"])])),_:1},512)])]),(0,t._)("button",{type:"submit",class:"btn btn-primary",disabled:a.loadingChangePassword}," Simpan Password ",8,A)])),_:1},8,["model","rules","onFinish"])])])])])])),_:1},8,["spinning"])])}var j=e(4870),$=e(6524),x=(0,t.aZ)({name:"EditAdmin",props:{id:String},setup(){const a=(0,j.iH)(),s=(0,j.qj)({password:void 0,password_confirmation:void 0}),e=async(a,e)=>""===e?Promise.reject("Konfirmasi password tidak boleh kosong."):e!==s.password?Promise.reject("Password dan Konfirmasi password harus sama."):Promise.resolve(),t={password:[{required:!0,trigger:"change",message:"Password tidak boleh kosong"}],password_confirmation:[{required:!0,trigger:"change",validator:e}]},o=(0,j.iH)(),r=(0,j.qj)({name:void 0,username:void 0,password:void 0,password_confirmation:void 0,status_id:void 0}),i={name:[{required:!0,trigger:"change",message:"Nama tidak boleh kosong"}]};return{formRef:o,formState:r,formRules:i,passwordFormRef:a,passwordFormState:s,passwordRules:t}},data(){return{administrator:void 0,loadingSubmit:!1,loadingGet:!0,loadingChangePassword:!1}},mounted(){this.fetchAdmin()},methods:{async fetchAdmin(){this.loadingGet=!0;const a=await(0,$.be)(this.$props.id);a.success&&(this.formState.name=a.data.name,this.formState.username=a.data.username,this.formState.status_id=a.data.status_id),this.loadingGet=!1},async onSubmit(){const a=await(0,$.aq)(this.$props.id,{name:this.formState.name,status_id:this.formState.status_id,username:this.formState.username});a.success&&(this.formState.name=a.data.name,this.formState.username=a.data.username,this.formState.status_id=a.data.status_id)},async submitChangePassword(){this.loadingChangePassword=!0;const a=await(0,$.aq)(this.$props.id,{password:this.passwordFormState.password,password_confirmation:this.passwordFormState.password_confirmation});a.success&&this.passwordFormRef.resetFields(),this.loadingChangePassword=!1},handleChangePassword(){this.passwordFormRef.validateFields().then((()=>{this.submitChangePassword()})).catch((()=>{}))},handleEdit(){this.formRef.validateFields().then((()=>this.onSubmit())).catch((()=>{}))},onStatusChange(a){this.formState.status_id=a?1:2}}}),G=e(89);const I=(0,G.Z)(x,[["render",U]]);var K=I}}]);